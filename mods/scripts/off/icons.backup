--characters icon variables
size = 0.169
xo = 0
xp = 1065
--Notes Variables
timer = {2,2.5,3,3.5,2,2.5,3,3.5}

function onCreate()
--Loyal Death Anim
	-------------------------------------------------------------------------------------------------------------------------------------
	addCharacterToList('loyal-gameover', 'bf')
    setPropertyFromClass('substates.GameOverSubstate', 'characterName', 'loyal-gameover'); --Character json file for the death animation
	-------------------------------------------------------------------------------------------------------------------------------------

--Purple Fire
	makeLuaSprite("fire", 'hud/fire', getProperty('iconP1.X'), getProperty('iconP1.Y'))
	addLuaSprite("fire",false)
	scaleObject("fire", 0.125, 0.125)
	setObjectCamera("fire",'hud')

	makeLuaSprite('healthabovehealth', 'healthBarr',0,0)
	screenCenter('healthabovehealth', 'x')
	setObjectCamera('healthabovehealth', 'hud')
	addLuaSprite('healthabovehealth',false)
	scaleObject('healthabovehealth', 1.015,1)
	setObjectOrder("healthabovehealth", getObjectOrder("healthBar")+50)
	setProperty('healthabovehealth.origin.x', 425)

	setPropertyFromClass('backend.ClientPrefs', 'data.comboOffset', {650, -150, 725, -100}) 

--Characters Icons
if downscroll == false then
	y = 475
	if songName == 'Leisure' or songName == 'flow' then
	else
		makeLuaSprite('iconL','hud/icons/loyal', xp, y)
		addLuaSprite('iconL', false)
		scaleObject('iconL', size, size)
		setObjectCamera('iconL', 'hud')
		setObjectOrder('iconL', 10)
	end
		
	if week == 'tutorial' then
		makeLuaSprite('icon','hud/icons/Gosha and Jonnhy', xo, y)
	elseif week == 'week1' then
		makeLuaSprite('icon','hud/icons/treznor', xo, y)
	elseif week == 'week2' then
		makeLuaSprite('icon','hud/icons/brother', xo, y)
	elseif week == 'week3' then
 		makeLuaSprite('icon','hud/icons/dia', xo, y)
	elseif week == 'week4' then
		makeLuaSprite('icon','hud/icons/jane', xo, y)
	elseif week == 'week5' then
		makeLuaSprite('icon','hud/icons/athena', xo, y)
	elseif week == 'week7' then
		makeLuaSprite('icon','hud/icons/jully', xo, y)
	end

else
	y = -15
		makeLuaSprite('iconL','hud/icons/loyal', xp, y)
		addLuaSprite('iconL', false)
		scaleObject('iconL', size, size)
		setObjectCamera('iconL', 'hud')
		setObjectOrder('iconL', 10)
	if songName == 'right-time' or songName == '' then
		makeLuaSprite('icon','hud/icons/Gosha and Jonnhy', xo, y)
	end
	if songName == 'Unwanted' or songName == 'Loyal' then
		makeLuaSprite('icon','hud/icons/brother', xo, y)
	end
	if songName == 'bass' or songName == 'Breakdown' or songName == 'Escape' then
		makeLuaSprite('icon','hud/icons/treznor', xo, y)
	end

	if songName == 'face-off' or songName == 'amends' or songName == 'lizza' or songName == 'showdown' then
		makeLuaSprite('icon','hud/icons/athena', xo, y)
	end
	if songName == 'WTF' then
		makeLuaSprite('icon','hud/icons/jane', xo, y)
	end
	if songName == 'jullyt' then
		makeLuaSprite('icon','hud/icons/jully', xo, y)
	end

	if songName == 'radio' then
		makeLuaSprite('icon','hud/icons/dia', xo, y)
	end
end
		addLuaSprite('icon', false)
		scaleObject('icon', size, size)
		setObjectCamera('icon', 'hud')
		setObjectOrder('icon', 10)
		setProperty('icon.flip.X', true)
end

function onCreatePost()
--purple fire
	setObjectOrder("healthabovehealth", 50)
	setObjectOrder("fire", getObjectOrder("healthabovehealth")+28)

--Notes
	runTimer('rotate', 0.5)
	if songName == 'Leisure' then	
		for i = 0,3 do
			noteTweenX('hideop'..i, i, -10050, 0.001, 'quartInOut')
		end
	end	
if downscroll == false then
	for i=0,7 do
		noteTweenY('defaultPlayerStrumY0'..i, i, -150, 0.001, 'quartInOut')
	end	
	for i = 0,7 do	
		noteTweenY("E1"..i, i, 50, timer[i+1],"backInOut");
	end
else
	for i=0,7 do
		noteTweenY('defaultPlayerStrumY0'..i, i, 750, 0.001, 'backInOut')
	end	
	for i = 0,7 do	
		noteTweenY("E1"..i, i, 575, timer[i+1],"backInOut");
	end		
end 
end


--Characters Icon Bop
sizebop = 0.179
animation = 'SmoothStepInOut'
function goodNoteHit(index, noteDir, noteType, isSustainNote) --size = 0.169
	if not isSustainNote then
		scaleObject('iconL', sizebop, sizebop)
		doTweenX('iconX', 'iconL.scale', size, 0.25, animation)
		doTweenY('iconY', 'iconL.scale', size, 0.25, animation)
		doTweenY('iconPY', 'iconL', y-5, 0.25, animation)
		doTweenX('iconPX', 'iconL', xp, 0.25, animation)
	end
end

function opponentNoteHit(index, noteDir, noteType, isSustainNote)
	if not isSustainNote then
		scaleObject('icon', sizebop-0.0075, sizebop-0.0075)
		doTweenX('iconOPX', 'icon.scale', size-0.005, 0.25, animation)
		doTweenY('iconOPY', 'icon.scale', size-0.005, 0.25, animation)
		doTweenY('iconOY', 'icon', y, 0.25, animation)
		doTweenX('iconOX', 'icon', xo, 0.25, animation)
	end
end

--Purple Fire Position
function onUpdatePost()
	getPropertyFromClass('backend.ClientPrefs', 'data.comboOffset')
	if downscroll == false then
		setProperty('healthabovehealth.y', 560)
	else
		setProperty('healthabovehealth.y', 55)
	end


	if downscroll == false then
		doTweenX("fireX", "fire", getProperty("iconP1.x")+17, 0.05, "smoothStepInOut")
		doTweenY("fireY", "fire", getProperty("iconP1.y")-15, 0.05, "smoothStepInOut")
	else
		doTweenX("fireX", "fire", getProperty("iconP1.x")+17, 0.05, "smoothStepInOut")
		doTweenY("fireY", "fire", getProperty("iconP1.y")+40, 0.05, "smoothStepInOut")
	end
	setProperty('fire.scale.x', getProperty('iconP1.scale.x')-0.3)
	setProperty('fire.scale.y', getProperty('iconP1.scale.y')-0.3)
	setProperty('iconP1.visible', false)
	setProperty('iconP2.visible', false)
end

--Notes
function onTimerCompleted(tag)
    if tag == 'rotate' then
        for i = 0,7 do	
            noteTweenAngle('ee'..i,i,360,timer[i+1],'backInOut');
        end		
    end
end